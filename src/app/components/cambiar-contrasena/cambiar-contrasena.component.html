<div class="cambiar-contrasena-container">
  <h2>Cambiar Contraseña</h2>

  <form (ngSubmit)="onSubmit()" #cambiarContrasenaForm="ngForm">
    <div class="form-group">
      <label for="nuevaContrasena">Nueva Contraseña:</label>
      <input
        type="password"
        id="nuevaContrasena"
        name="nuevaContrasena"
        [(ngModel)]="nuevaContrasena"
        required
        minlength="8"
        #nuevaContrasenaInput="ngModel"
      />
      <div *ngIf="nuevaContrasenaInput.invalid && nuevaContrasenaInput.touched" class="error">
        <span *ngIf="nuevaContrasenaInput.errors?.['required']">La nueva contraseña es requerida.</span>
        <span *ngIf="nuevaContrasenaInput.errors?.['minlength']">Debe tener al menos 8 caracteres.</span>
      </div>
    </div>

    <div class="form-group">
      <label for="confirmarContrasena">Confirmar Contraseña:</label>
      <input
        type="password"
        id="confirmarContrasena"
        name="confirmarContrasena"
        [(ngModel)]="confirmarContrasena"
        required
        minlength="8"
        #confirmarContrasenaInput="ngModel"
      />
      <div *ngIf="confirmarContrasenaInput.invalid && confirmarContrasenaInput.touched" class="error">
        <span *ngIf="confirmarContrasenaInput.errors?.['required']">Confirmar contraseña es requerido.</span>
        <span *ngIf="confirmarContrasenaInput.errors?.['minlength']">Debe tener al menos 8 caracteres.</span>
      </div>
      <div *ngIf="nuevaContrasenaInput.valid && confirmarContrasenaInput.valid && nuevaContrasena !== confirmarContrasena" class="error">
        Las contraseñas no coinciden.
      </div>
    </div>

    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <div *ngIf="mensajeExito" class="success-message">
      {{ mensajeExito }}
    </div>

    <button type="submit" [disabled]="!cambiarContrasenaForm.form.valid">Cambiar Contraseña</button>
  </form>

  <button class="boton-flotante back-button" (click)="volver()" aria-label="Volver">
    <i class="bi bi-arrow-left"></i>
  </button>
</div>
